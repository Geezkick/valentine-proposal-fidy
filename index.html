<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Brian ‚ù§Ô∏è Fidy</title>

  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600&family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">

  <style>
    * { box-sizing: border-box; font-family: 'Poppins', sans-serif; }

    body {
      margin: 0;
      height: 100vh;
      background: radial-gradient(circle at top, #ffb3c6, #ff6f91, #ff9671);
      overflow: hidden;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    /* ---------------- LOADING SCREEN ---------------- */
    .loader {
      position: fixed;
      inset: 0;
      background: radial-gradient(circle at center, #ff4d79, #b30047);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      z-index: 5000;
      color: white;
      animation: fadeIn 0.6s ease;
    }

    .loader h1 {
      font-family: 'Playfair Display', serif;
      font-size: 2rem;
      margin-bottom: 8px;
    }

    .pulse-heart {
      width: 80px;
      height: 80px;
      background: red;
      position: relative;
      transform: rotate(-45deg);
      animation: beat 1s infinite;
      margin-bottom: 12px;
    }

    .pulse-heart::before,
    .pulse-heart::after {
      content: "";
      width: 80px;
      height: 80px;
      background: red;
      border-radius: 50%;
      position: absolute;
    }

    .pulse-heart::before { top: -40px; left: 0; }
    .pulse-heart::after { left: 40px; top: 0; }

    /* ---------------- FLOATING HEARTS ---------------- */
    .floating {
      position: absolute;
      width: 22px;
      height: 22px;
      background: red;
      clip-path: polygon(50% 0%, 61% 14%, 75% 14%, 86% 25%, 86% 39%, 50% 75%, 14% 39%, 14% 25%, 25% 14%, 39% 14%);
      opacity: 0.7;
      animation: floatUp 9s linear infinite;
      pointer-events: none;
    }

    @keyframes floatUp {
      from { transform: translateY(110vh) scale(0.7); opacity: 0; }
      to { transform: translateY(-10vh) scale(1.2); opacity: 1; }
    }

    /* ---------------- MAIN CARD ---------------- */
    .card {
      background: rgba(255,255,255,0.25);
      backdrop-filter: blur(25px);
      border-radius: 32px;
      padding: 34px 26px;
      width: 95%;
      max-width: 430px;
      text-align: center;
      box-shadow: 0 30px 80px rgba(0,0,0,0.35);
      position: relative;
      z-index: 20;
      animation: cardEnter 1s ease;
    }

    @keyframes cardEnter {
      from { opacity: 0; transform: translateY(20px) scale(0.95); }
      to { opacity: 1; transform: translateY(0) scale(1); }
    }

    h1 {
      font-family: 'Playfair Display', serif;
      margin-bottom: 10px;
      color: #7a0026;
      font-size: 1.9rem;
    }

    .photos {
      display: flex;
      justify-content: center;
      gap: 18px;
      margin: 16px 0;
    }

    .photo {
      width: 82px;
      height: 82px;
      border-radius: 50%;
      border: 3px solid white;
      object-fit: cover;
      box-shadow: 0 8px 18px rgba(0,0,0,0.25);
      transition: transform 0.4s ease, box-shadow 0.4s ease;
    }

    .photo:hover {
      transform: scale(1.12) rotate(-3deg);
      box-shadow: 0 12px 28px rgba(255,0,80,0.45);
    }

    /* ---------------- HEART ---------------- */
    .heart {
      width: 95px;
      height: 95px;
      background: red;
      margin: 18px auto;
      position: relative;
      transform: rotate(-45deg);
      animation: beat 1.1s infinite;
      box-shadow: 0 12px 35px rgba(255,0,90,0.55);
    }

    .heart::before,
    .heart::after {
      content: "";
      width: 95px;
      height: 95px;
      background: red;
      border-radius: 50%;
      position: absolute;
    }

    .heart::before { top: -47px; left: 0; }
    .heart::after { left: 47px; top: 0; }

    @keyframes beat {
      0%, 100% { transform: rotate(-45deg) scale(1); }
      50% { transform: rotate(-45deg) scale(1.25); }
    }

    .message {
      color: #6b0022;
      font-size: 15px;
      margin: 16px 0 22px;
      line-height: 1.5;
    }

    /* ---------------- BUTTONS ---------------- */
    .buttons {
      display: flex;
      flex-direction: column;
      gap: 12px;
      margin-top: 18px;
      position: relative;
    }

    button {
      border: none;
      padding: 14px 18px;
      border-radius: 999px;
      font-size: 15px;
      cursor: pointer;
      font-weight: 600;
      transition: 0.3s ease;
      position: relative;
    }

    #yesBtn {
      background: linear-gradient(135deg, #ff2a68, #ff6fa1);
      color: white;
      box-shadow: 0 10px 30px rgba(255,0,100,0.5);
      animation: glow 2s infinite;
    }

    @keyframes glow {
      0%,100% { box-shadow: 0 10px 30px rgba(255,0,100,0.4); }
      50% { box-shadow: 0 15px 45px rgba(255,0,130,0.8); }
    }

    #yesBtn:hover { transform: scale(1.08); }

    #noBtn {
      background: rgba(255,255,255,0.75);
      color: #a10035;
      position: absolute;
      left: 0;
      right: 0;
      margin: auto;
    }

    #kidsBtn {
      background: linear-gradient(135deg, #ffd166, #ffb703);
      color: #7a3f00;
      box-shadow: 0 8px 22px rgba(255,183,3,0.45);
    }

    #kidsBtn:hover { transform: scale(1.06); }

    .secondary-buttons {
      display: flex;
      gap: 10px;
      justify-content: center;
      margin-top: 12px;
      flex-wrap: wrap;
    }

    .mini-btn {
      padding: 10px 14px;
      border-radius: 999px;
      border: none;
      font-size: 13px;
      font-weight: 600;
      cursor: pointer;
      background: rgba(255,255,255,0.7);
      color: #7a0026;
      box-shadow: 0 6px 15px rgba(0,0,0,0.2);
      transition: 0.25s ease;
    }

    .mini-btn:hover {
      transform: translateY(-2px) scale(1.05);
      box-shadow: 0 10px 22px rgba(255,0,80,0.35);
    }

    /* ---------------- MODALS ---------------- */
    .modal {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.45);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 999;
    }

    .modal-content {
      background: white;
      padding: 28px 24px;
      border-radius: 26px;
      max-width: 420px;
      width: 92%;
      text-align: center;
      animation: pop 0.45s ease;
      box-shadow: 0 25px 60px rgba(0,0,0,0.35);
    }

    @keyframes pop {
      from { transform: scale(0.85); opacity: 0; }
      to { transform: scale(1); opacity: 1; }
    }

    .modal h2 {
      color: #b30047;
      margin-bottom: 10px;
      font-family: 'Playfair Display', serif;
    }

    .modal p {
      font-size: 14px;
      line-height: 1.6;
      color: #5a0020;
    }

    .close {
      margin-top: 14px;
      background: #ff2a68;
      color: white;
      border-radius: 999px;
      padding: 10px 18px;
      border: none;
      cursor: pointer;
      font-weight: 600;
      box-shadow: 0 8px 18px rgba(255,0,100,0.4);
    }

    .baby-photo {
      width: 120px;
      height: 120px;
      border-radius: 50%;
      object-fit: cover;
      border: 4px solid #ffd166;
      box-shadow: 0 10px 25px rgba(0,0,0,0.25);
      margin-bottom: 12px;
    }

    /* ---------------- SLIDESHOW ---------------- */
    .slideshow {
      margin-top: 16px;
      position: relative;
      width: 100%;
      height: 160px;
      border-radius: 20px;
      overflow: hidden;
      box-shadow: 0 12px 30px rgba(0,0,0,0.3);
    }

    .slide {
      position: absolute;
      inset: 0;
      opacity: 0;
      transition: opacity 1s ease;
      object-fit: cover;
      width: 100%;
      height: 100%;
    }

    .slide.active {
      opacity: 1;
    }

    /* ---------------- CELEBRATION ---------------- */
    .celebrate {
      position: fixed;
      inset: 0;
      background: radial-gradient(circle at top, #ff9a9e, #ff3f7f);
      display: none;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      z-index: 2000;
      animation: fadeIn 0.8s ease;
      color: white;
      text-align: center;
      padding: 20px;
    }

    .celebrate h1 {
      color: white;
      font-size: 2.3rem;
      margin-bottom: 10px;
    }

    .celebrate p {
      font-size: 1.1rem;
      max-width: 340px;
    }

    .ring {
      font-size: 3.2rem;
      margin: 14px 0;
      animation: pop 1s infinite alternate;
    }

    /* ---------------- FIREWORKS CANVAS ---------------- */
    canvas#fireworks {
      position: fixed;
      inset: 0;
      pointer-events: none;
      z-index: 1500;
    }

    /* ---------------- CONFETTI ---------------- */
    .confetti {
      position: fixed;
      width: 10px;
      height: 10px;
      background: red;
      top: -10px;
      animation: confettiFall linear forwards;
      z-index: 1500;
      pointer-events: none;
    }

    @keyframes confettiFall {
      to {
        transform: translateY(110vh) rotate(720deg);
        opacity: 0;
      }
    }

    /* ---------------- MUSIC CONTROL ---------------- */
    .music-btn {
      position: fixed;
      bottom: 14px;
      right: 14px;
      background: rgba(255,255,255,0.75);
      border-radius: 50%;
      width: 52px;
      height: 52px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.4rem;
      cursor: pointer;
      box-shadow: 0 8px 20px rgba(0,0,0,0.3);
      z-index: 3000;
      transition: 0.3s ease;
    }

    .music-btn:hover {
      transform: scale(1.1);
      box-shadow: 0 12px 28px rgba(255,0,90,0.45);
    }

    /* ---------------- MAP BUTTON ---------------- */
    .map-btn {
      background: linear-gradient(135deg, #3a86ff, #4dabf7);
      color: white;
      box-shadow: 0 8px 22px rgba(58,134,255,0.45);
    }

    /* ---------------- SHARE BUTTON ---------------- */
    .share-btn {
      background: linear-gradient(135deg, #25d366, #128c7e);
      color: white;
      box-shadow: 0 8px 22px rgba(18,140,126,0.45);
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
  </style>
</head>
<body>

  <!-- üîä MUSIC -->
  <audio id="bgMusic" autoplay loop playsinline>
    <source src="audio/el-amado.mp3" type="audio/mpeg">
  </audio>

  <!-- üî• FIREWORKS -->
  <canvas id="fireworks"></canvas>

  <!-- üéµ MUSIC CONTROL -->
  <div class="music-btn" id="musicToggle">üîä</div>

  <!-- ‚è≥ LOADING SCREEN -->
  <div class="loader" id="loader">
    <div class="pulse-heart"></div>
    <h1>Brian ‚ù§Ô∏è Fidy</h1>
    <p>Loading your love story...</p>
  </div>

  <!-- üíñ FLOATING HEARTS SCRIPT -->
  <script>
    for (let i = 0; i < 28; i++) {
      const heart = document.createElement("div");
      heart.className = "floating";
      heart.style.left = Math.random() * 100 + "vw";
      heart.style.animationDelay = Math.random() * 8 + "s";
      heart.style.animationDuration = 6 + Math.random() * 8 + "s";
      heart.style.opacity = 0.4 + Math.random() * 0.6;
      heart.style.transform = `scale(${0.6 + Math.random()})`;
      document.body.appendChild(heart);
    }
  </script>

  <!-- üíå MAIN CARD -->
  <div class="card" id="mainCard" style="display:none;">
    <h1>Brian ‚ù§Ô∏è Fidy</h1>

    <div class="photos">
      <img src="images/Brian.png" class="photo" alt="Brian"/>
      <img src="images/fidy.png" class="photo" alt="Fidy"/>
    </div>

    <div class="heart" id="mainHeart"></div>

    <div class="message">
      Fidy Nkatha, you are my favorite place in this world.<br/>
      Will you be my Valentine‚Ä¶ and my forever? üíç‚ù§Ô∏è
    </div>

    <div class="slideshow" id="slideshow">
      <img src="slideshow/geezfam1.png" class="slide active"/>
      <img src="slideshow/geezfam2.png" class="slide"/>
      <img src="slideshow/geezfam3.png" class="slide"/>
      <img src="slideshow/geezfam4.png" class="slide"/>
      <img src="slideshow/geezfam5.png" class="slide"/>
      <img src="slideshow/geezfam6.png" class="slide"/>
    </div>

    <div class="buttons">
      <button id="yesBtn">YES üíç</button>
      <button id="noBtn">NO üòÖ</button>
      <button id="kidsBtn">Our Baby üë∂‚ù§Ô∏è</button>
    </div>

    <div class="secondary-buttons">
      <button class="mini-btn map-btn" id="mapBtn">üìç Where we met</button>
      <button class="mini-btn share-btn" id="shareBtn">üì≤ Share</button>
      <button class="mini-btn" id="letterBtn">üíå Love Letter</button>
    </div>
  </div>

  <!-- üíå LETTER MODAL -->
  <div class="modal" id="letterModal">
    <div class="modal-content">
      <h2>My Love Letter to You ‚ù§Ô∏è</h2>
      <p>
        My Fidy ‚ù§Ô∏è,<br><br>
        From the moment you walked into my life, everything started making sense.
        Your smile became my calm, your voice my peace, and your heart my home.<br><br>
        I don‚Äôt want a life where you‚Äôre just a chapter ‚Äî I want you to be the whole story.
        I want us to grow, laugh, dream, build, and raise our beautiful Yovanny together ü•π‚ù§Ô∏è.<br><br>
        Fidy Nkatha, you are my prayer answered, my peace, my future.<br><br>
        Will you be my Valentine‚Ä¶ and my forever? üíç‚ù§Ô∏è<br><br>
        ‚Äî Brian Nyarienya
      </p>
      <button class="close" onclick="closeLetter()">Close ‚ù§Ô∏è</button>
    </div>
  </div>

  <!-- üë∂ BABY MODAL -->
  <div class="modal" id="kidsModal">
    <div class="modal-content">
      <h2>Our Baby ‚ù§Ô∏è</h2>
      <img src="images/yovanny.png" class="baby-photo" alt="Yovanny"/>
      <p>
        Our little miracle, our future, our love in human form ü•π‚ù§Ô∏è.<br><br>
        This family only makes sense with you, Fidy.
      </p>
      <button class="close" onclick="closeKids()">Awww ‚ù§Ô∏è</button>
    </div>
  </div>

  <!-- üéâ CELEBRATION SCREEN -->
  <div class="celebrate" id="celebrate">
    <h1>She Said YES üíç‚ù§Ô∏è</h1>
    <div class="ring">üíç</div>
    <p>
      Fidy Nkatha, my forever starts today with you.<br/>
      I love you endlessly, my Valentine ‚ù§Ô∏è
    </p>
  </div>

  <script>
    const loader = document.getElementById("loader");
    const mainCard = document.getElementById("mainCard");
    const noBtn = document.getElementById("noBtn");
    const yesBtn = document.getElementById("yesBtn");
    const kidsBtn = document.getElementById("kidsBtn");
    const letterBtn = document.getElementById("letterBtn");
    const mapBtn = document.getElementById("mapBtn");
    const shareBtn = document.getElementById("shareBtn");
    const letterModal = document.getElementById("letterModal");
    const kidsModal = document.getElementById("kidsModal");
    const celebrate = document.getElementById("celebrate");
    const music = document.getElementById("bgMusic");
    const musicToggle = document.getElementById("musicToggle");
    const heart = document.getElementById("mainHeart");
    const slides = document.querySelectorAll(".slide");
    const fireworksCanvas = document.getElementById("fireworks");
    const ctx = fireworksCanvas.getContext("2d");

    /* ---------- LOADING SCREEN ---------- */
    window.addEventListener("load", () => {
      setTimeout(() => {
        loader.style.display = "none";
        mainCard.style.display = "block";
        music.volume = 0.9;
        music.play().catch(()=>{});
      }, 1800);
    });

    /* ---------- MOBILE VIBRATION FEEDBACK ---------- */
    function vibrate(ms = 50) {
      if (navigator.vibrate) navigator.vibrate(ms);
    }

    document.querySelectorAll("button").forEach(btn => {
      btn.addEventListener("click", () => vibrate(40));
    });

    /* ---------- HEARTBEAT SYNC TO MUSIC BPM ---------- */
    let beatScale = 1;
    setInterval(() => {
      beatScale = beatScale === 1 ? 1.25 : 1;
      heart.style.transform = `rotate(-45deg) scale(${beatScale})`;
    }, 610); // tuned to El Amado BPM feel

    /* ---------- MUSIC TOGGLE ---------- */
    musicToggle.addEventListener("click", () => {
      vibrate(20);
      if (music.paused) {
        music.play();
        musicToggle.textContent = "üîä";
      } else {
        music.pause();
        musicToggle.textContent = "üîá";
      }
    });

    /* ---------- NO BUTTON ESCAPE ---------- */
    noBtn.addEventListener("mouseenter", () => {
      vibrate(15);
      const x = Math.random() * 260 - 130;
      const y = Math.random() * 160 - 80;
      noBtn.style.transform = `translate(${x}px, ${y}px)`;
    });

    /* ---------- YES BUTTON ---------- */
    yesBtn.addEventListener("click", () => {
      vibrate([100, 50, 100]);
      celebrate.style.display = "flex";
      launchConfetti();
      startChorusFireworks();
      setTimeout(fullscreenFinale, 3500);
    });

    /* ---------- KIDS BUTTON ---------- */
    kidsBtn.addEventListener("click", () => {
      vibrate(40);
      kidsModal.style.display = "flex";
    });

    /* ---------- LETTER BUTTON ---------- */
    letterBtn.addEventListener("click", () => {
      vibrate(40);
      letterModal.style.display = "flex";
    });

    /* ---------- MAP BUTTON ---------- */
    mapBtn.addEventListener("click", () => {
      vibrate(60);
      window.open("https://www.google.com/maps/search/?api=1&query=Nairobi+Kenya", "_blank");
    });

    /* ---------- SHARE BUTTON ---------- */
    shareBtn.addEventListener("click", () => {
      vibrate(80);
      const text = encodeURIComponent("She said YES üíç‚ù§Ô∏è to Brian & Fidy! Our love story continues ü•πüî•");
      window.open(`https://wa.me/?text=${text}`, "_blank");
    });

    function closeLetter() { letterModal.style.display = "none"; }
    function closeKids() { kidsModal.style.display = "none"; }

    /* ---------- SLIDESHOW ---------- */
    let slideIndex = 0;
    setInterval(() => {
      slides.forEach(s => s.classList.remove("active"));
      slideIndex = (slideIndex + 1) % slides.length;
      slides[slideIndex].classList.add("active");
    }, 3000);

    /* ---------- CONFETTI ---------- */
    function launchConfetti() {
      for (let i = 0; i < 160; i++) {
        const confetti = document.createElement("div");
        confetti.className = "confetti";
        confetti.style.left = Math.random() * 100 + "vw";
        confetti.style.background = `hsl(${Math.random()*360},100%,60%)`;
        confetti.style.animationDuration = 2 + Math.random() * 3 + "s";
        confetti.style.transform = `rotate(${Math.random()*360}deg)`;
        document.body.appendChild(confetti);
        setTimeout(() => confetti.remove(), 5000);
      }
    }

    /* ---------- FIREWORKS ENGINE ---------- */
    function resizeCanvas() {
      fireworksCanvas.width = window.innerWidth;
      fireworksCanvas.height = window.innerHeight;
    }
    resizeCanvas();
    window.addEventListener("resize", resizeCanvas);

    const fireworks = [];

    function Firework(x, y) {
      this.x = x;
      this.y = y;
      this.particles = [];
      const count = 70 + Math.random() * 70;
      for (let i = 0; i < count; i++) {
        const angle = Math.random() * Math.PI * 2;
        const speed = Math.random() * 7 + 3;
        this.particles.push({
          x: x,
          y: y,
          vx: Math.cos(angle) * speed,
          vy: Math.sin(angle) * speed,
          alpha: 1,
          color: `hsl(${Math.random()*360},100%,60%)`
        });
      }
    }

    function drawFireworks() {
      ctx.clearRect(0, 0, fireworksCanvas.width, fireworksCanvas.height);
      fireworks.forEach((fw, index) => {
        fw.particles.forEach(p => {
          p.x += p.vx;
          p.y += p.vy;
          p.vy += 0.05;
          p.alpha -= 0.012;
          ctx.globalAlpha = p.alpha;
          ctx.fillStyle = p.color;
          ctx.beginPath();
          ctx.arc(p.x, p.y, 3.2, 0, Math.PI*2);
          ctx.fill();
        });
        fw.particles = fw.particles.filter(p => p.alpha > 0);
        if (fw.particles.length === 0) fireworks.splice(index, 1);
      });
      ctx.globalAlpha = 1;
      requestAnimationFrame(drawFireworks);
    }
    drawFireworks();

    function launchFireworks() {
      fireworks.push(new Firework(
        Math.random() * fireworksCanvas.width,
        Math.random() * fireworksCanvas.height * 0.6
      ));
    }

    /* ---------- üéµ CHORUS SYNC FIREWORKS ---------- */
    const chorusTimes = [
      38,  // first chorus (seconds)
      78,  // second chorus
      118, // third chorus
      158  // outro chorus
    ];

    let chorusIndex = 0;

    function startChorusFireworks() {
      music.addEventListener("timeupdate", () => {
        if (chorusIndex < chorusTimes.length &&
            music.currentTime >= chorusTimes[chorusIndex]) {

          // Massive fireworks burst on chorus
          for (let i = 0; i < 8; i++) {
            setTimeout(launchFireworks, i * 150);
          }

          // Heart pulse boost
          heart.style.animationDuration = "0.7s";

          chorusIndex++;
        }
      });
    }

    /* ---------- FULLSCREEN FINALE ---------- */
    function fullscreenFinale() {
      for (let i = 0; i < 24; i++) {
        setTimeout(() => {
          fireworks.push(new Firework(
            Math.random() * fireworksCanvas.width,
            Math.random() * fireworksCanvas.height * 0.7
          ));
        }, i * 180);
      }
    }
  </script>

</body>
</html>
